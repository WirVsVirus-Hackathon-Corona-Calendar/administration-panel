import { Challenge, ChallengeDto } from './challenge';

class ChallengesService {
  private challenges: Challenge[] = [];

  public async loadChallenges(): Promise<Challenge[]> {
    const resp = await Promise.resolve({
      data: [
        {
          /* eslint-disable @typescript-eslint/camelcase */
          story_before: "Das Imf war sich sicher: Die Spur führte in die Stadt. Es gab keinen andere Erklärung dafür, die weißen Streifen waren immer deutlicher geworden und führten direkt unter dem geschlossenen Tor hindurch. Davor standen eine müde Stadtwache mit Rüstung und Lanzen. Das Imf ging auf das Tor zu, doch sie hob die Hand. \"Kein Durchgang\", murrte der Elefant. \"Weitergehen!\" Das Imf sah ihn verblüfft an. \"Aber ich muss in die Stadt. Es ist wichtig\" , erwiderte es, trat aber trotzdem einen Schritt zurück. \"Warum darf man denn nicht mehr rein?\"Der Elefant zuckte mit den Schultern. \" Befehl von oben. Keine Fremde in die Stadt. Und du bist nicht aus der Stadt, du… was bist du überhaupt?\" Imf schaute ihn verblüfft an. \" Ich bin ein Imf, das sieht man doch. Und wer bist du?\" Der Elefant gähnte. \"Konrad. Imf, ich hab nichts gegen dich, aber wir können niemanden reinlassen. Niemand, der von außen kommt, darf rein. Sonst reichen die Vorräte unseres Königs nicht für die Stadt.\" Imf wunderte sich. \"Vorräte? Aber es ist doch mitten im Sommer! Wieso habt ihr denn Vorräte?\"Wieder zuckte Konrad nur mit den Schultern \"Befehle von oben. Es kommt wohl was auf uns zu.\" Dann seufzte er.Das Imf schaute ihn mitfühlend an. \"Du siehst ziemlich erschöpft aus. Geht es dir gut?\" Der Dickhäuter seufzte erneut und schüttelte den Kopf.\"Kann nicht schlafen\",brummte er und gähnte ausgiebig. Dabei hielt er sich jedoch immer noch höflich den Rüssel vor den Mund. \"Das tut mir Leid\", antwortete das Imf. \"Das kenn ich auch. Danach bin ich immer ganz müde und schlecht gelaunt. Warum kannst du denn nicht schlafen? Hast du Alpträume?\"\n\"Nö. Kann nicht einschlafen\", kam einsilbig zurück, aber das Imf ließ nicht locker. \"Hast du es schon mit einer heißen Schokolade vor dem Einschlafen probiert, mit einem Keks dazu? Das hilft bestimmt?\" - \"Nö. Hab Tee Probiert. Hilft nicht.\" Imf dachte nach. \" Hast du.. Schäfchen gezählt?\" Konrad nickte. \"Die ganze Nacht. Hat nix gebracht.\"\"Hmmm…\", überlegte Imf. \"Vielleicht ist es bei dir in der Nachbarschaft zu laut. Schonmal über Ohrstöpsel nachgedacht?\" Konrad sah nur bedauernd hoch. \"In meiner Größe?\"\nSchließlich gab das Imf auf. \"Woran liegt es denn dann bitte, lieber Konrad, dass du nicht schlafen kannst?\" Konrad seufzte wieder und schüttelte sich. \"Ich hab nen Ohrwurm. Und ich krieg ihn nicht los. Elefanten haben ein sehr gutes Gedächtnis. deshalb sind wir auch Stadtwache. Wir wissen, wer hier rein und raus geht. Und neulich kam hier 'ne Spielmannstruppe vorbei und die ham' so ein tolles Lied gesungen. Echt toll. Und jetzt geht mir das nicht mehr aus dem Kopf.\" Imf lächelte erleichtert. \"Ach so, dass ist doch ganz einfach! Einen Ohrwurm bekommt man aus dem Kopf, wenn man das Lied zu Ende singt. Das hilft dir bestimmt!\"\n Diesmal seufzte Konrad noch tiefer. \"Die sind zu schnell in die Stadt. Ich hab das Ende nicht mehr gehört.\"\nKonrad tat Imf furchtbar Leid. Er machte einfach nur seinen Job, sorgte dafür, dass es den Leuten in der Stadt gut ging. Trotzdem war er so müde und bekam einfach nicht genug Schlaf. Was konnte Imf nur für ihn tun? Da bekam er eine Idee, eine geradezu geniale Idee. \n\"Konrad, bleib hier. Ich habe eine großartige Idee!\", sagte es und - Schwupps! war es wieder Richtung Wald verschwunden. Dort suchte es sich alles, was es brauchte, und kramte noch dazu in seinem Rucksack. Konrad brauchte einfach einen neuen Ohrwurm, der seinen alten vertrieb. Einen, den Imf geschrieben hatte. Ein ganz tolles Lied musste das sein, mit toller Hintergrundmusik und dafür mussten Instrumente her. Imf könnte eine Trommel bauen oder eine Gitarre oder eine Rassel und einen tollen Text brauchte auch. Mit was sollte es nur anfangen?", icon_url: 'https://corona-cal.s3-eu-west-1.amazonaws.com/bg_tor.png', story_before_url: 'https://corona-cal.s3-eu-west-1.amazonaws.com/imf_vor_stadtmauer.png', attachments: ['https://corona-cal.s3-eu-west-1.amazonaws.com/trommeln.png'], order: 4.2, id: '0e56afcb-352c-4e2d-b22a-e55d050fcbd3', titel: 'Spiele Musik', anleitung: [' Trommeln:', '1. Suche dir leere saubere Konservendosen, die keine scharfe Kante haben. ', '2. Wenn du Luftballons zuhause hast, dann schneide das untere Ende von ihnen ab und versuche vorsichtig und mit Hilfe deiner Elten, den Luftballon über die Öffnung der Dose zu ziehen. Befestige den Luftballon rundherum entweder mit Gummies oder Klebeband. Hast du keinen Luftballkon zur Hand, dann kannst du auch aus Papier einen großen Kreis ausschneiden. Dieser sollte doppelt so groß wie die Öffnung der Dose sein. Lege in ganz straff über die Öffnung und klebe ihn mit Klebeband rundherum fest oder benutze Gummies.', '3. Hast du kleine Hölzer zuhause, kannst du sie als Trommelschläger nehmen. Stäbchen oder deine Hände kannst du aber auch dafür benutzen.'], beschreibung: 'Du kannst ganz einfach aus verschiedenen Materialien, die du zuhause finden kannst, deine eigenen Instrumente bauen. Baue so viele Instrumente wie du magst, gründe eine Band mit deiner Familie und plant einen Auftritt in eurem Garten oder auf dem Balkon.Oder dreht ein Video mit eurer Band und schickt es an Freunde und Verwandte. ', story_after: 'Konrad stand gelangweilt und müde vor dem Stadttor. Dieses Imf war nett gewesen, aber inzwischen vor ein paar Stunden verschwunden und nicht wieder aufgetaucht. Bald war sein Schicht zu Ende und er konnte einen weiteren Abend damit verbringen, erfolglos einzuschlafen. Die Aussicht war nicht gerade schön.\n"Hallo Konrad!" Der Elefant schreckte hoch. Er musste kurz weggenickt sein, denn plötzlich stand Imf wieder vor ihm, in den Händen etwas, was entfernt an ein Musikinstrument erinnerte. "Ich werde dich jetzt von deinem Ohrwurm heilen. Hör ja gut zu, dieses Lied ist nur für dich!" Bevor er etwas sagen konnte, begann das Imf laut zu singen und dazu auf seinem improvisierten Musikinstrument herum zu klopfen. Der Text war recht simpel, die Melodie auch, aber der Rhythmus... der Rhythmus war gut. Konrad konnte gar nicht anders, als mit der Rüsselspitze mitzuwippen. Bald summte er den Refrain mit, wippte mit den Knien, wackelte mit dem Schwanz, wippte mit dem Hintern. Schließlich konnte er nicht mehr, er musste einfach mitsingen. Laut sang Konrad mit dem Imf mit " Ohhh, das ist der Ohrwürmer - Blues!" Und die beiden sangen und tanzten, bis das Imf das Lied beendete. Da lachte Konrad und sagte. " Imf, du hast mir den Tag sehr versüßt. Heute Abend werde ich so bestimmt gut einschlafen können." Immer noch lächelnd öffnete Konrad das Tor. " Rein mit dir, mein junges Musiktalent. Und wenn mich jemand fragt, ob du rein bist..." Imf konnte schwören, dass es den Elefanten unter seinem Visier zwinkern sehen konnte "...hab ich dich vergessen."', story_after_url: 'https://corona-cal.s3-eu-west-1.amazonaws.com/imf_vor_stadtmauer.png', material: [' Trommel:', 'Gummies', 'Gummies oder Klebeband', 'Klebeband', 'Luftballons', 'Schere', 'leere Metalldosen'],
        },
      ],
    });

    if (!resp) {
      alert('Could not load challenges.');
      return [];
    }

    const data = resp.data as ChallengeDto[];

    const challenges = data.map((c) => Challenge.fromDto(c));

    this.challenges = challenges;

    return challenges;
  }

  public getChallenge(id: string): Challenge | undefined {
    return this.challenges.find((c) => c.id === id);
  }
}

export default new ChallengesService();
